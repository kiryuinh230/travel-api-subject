# Triple 사전과제 장민봉

## 고민한 부분

### Spring Security가 적용된 프로젝트에서의 인수 테스트 작성
- 간단한 회원 관련 추가 기능을 위해 Spring Security를 적용 했습니다.
- Spring Security가 적용된 프로젝트에서 인수테스트를 통해 테스트를 하는건 처음이라 학습이 필요 했습니다.
- 회원 가입과 로그인 API는 필터를 걸지 않고, 로그인 이후 받은 token을 헤더에 추가해서 인수테스트를 위한 요청에서 인증이 동과하도록 구현 했습니다. 


### 인수 테스트 작성
- RestAssured를 통해 인수 테스트를 작성 했습니다.
- 실제 서버를 띄워 테스트를 해야 인수 테스트에 의미가 있다고 생각하여 @SpringBootTest를 통해 테스트 했습니다.
- 각 테스트마다 데이터베이스 상태를 초기화해주기 위해 Jpa EntityManager를 통해 테이블 이름을 불러오고, 해당 테이블의 데이터를 Truncate 명령어로 초기화 해서 테스트간 격리를 구현 했습니다.


### 단위 테스트 작성
- 인수 테스트를 통해 실제 프로젝트를 띄우고 요청에 대한 응답을 검증할 수 있었습니다.
- 하지만 인수 테스트는 실제 서버를 실행 시켜야 하는 만큼 테스트 수행 실행이 느리며, 그로 인해 테스트 코드로 빠른 피드백을 받기 힘든 부분이 있습니다.
- 서버를 실행시키지 않고 의미 있는 동작에 대한 테스트는 추가적인 단위 테스트를 통해 검증을 하였습니다.


### 확장가능하고 변경에 유연한 패키지간 의존성 고려
- 현재 구현한 프로젝트의 패키지간 의존성은 domain을 향하게 되어있습니다.
- domain 패키지는 프로젝트에서 가장 변경성이 적은 비즈니스 규칙과 기능이 구현 되어있습니다.
- 확장성있는 패키지 구조를 갖도록 변경성이 높은 곳에서 낮은곳으로 의존성의 방향을 향하게 하였습니다. 


### 통일된 응답 객체 구현하기
- 현재 프로젝트에서 모든 응답은 CommonResponse 라는 객체로 래핑되어 응답하게 되어있습니다.
- CommpnResponse 객체 내부에 크게 success, error를 통해 api의 성공 여부를 드러내고
- 제네릭 필드를 통해 body에 들어갈 응답 객체가 필요하다면 응답합니다.
- 통일된 응답을 통해 협업과정에 있는 클라이언트 개발자가 예외 처리, 비즈니스 로직을 일관성 있게 구현 하기 쉽게 고민 했습니다.


### 구현하지 못한 요구사항
- 사용자별 도시 목록 조회 API 기능을 구현하지 못했습니다.
- 정렬 관련한 쿼리 구현 실력이 부족하여 학습을 진행 했지만, 끝내 구현하지 못했습니다.
- 해당 과제를 구현할 시간이 촉박하여 많은 시간을 할애하지는 못했습니다만, 필수 요구사항을 구현하지 못해 아쉬움이 남습니다.

### 실행 방법
```
java -jar -Dspring.profiles.active=development triple-0.0.1-SNAPSHOT.jar
```
